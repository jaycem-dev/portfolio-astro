---
import type { Navlinks } from "@lib/types";
import ThemeToggle from "@components/ThemeToggle.astro";
import HeaderLink from "@components/HeaderLink.astro";
import Link from "@ui/Link.astro";
import Logo from "@assets/icons/logo.svg";
import EmailIcon from "@assets/icons/email.svg";
import { getTranslations, type Locale } from "@lib/translations";
import { getRelativeLocaleUrl } from "astro:i18n";

export interface Props {
    lang: Locale;
}

const { lang } = Astro.props;
const t = getTranslations(lang);

const homeUrl = getRelativeLocaleUrl(lang, "/");

const navLinks: Navlinks[] = [
    {
        href: "/",
        label: t.nav.home,
    },
    {
        href: `/${t.routes.projects}`,
        label: t.nav.projects,
    },
    {
        href: `/${t.routes.blog}`,
        label: t.nav.blog,
    },
];
---

<header class="border-b">
    <div
        class="container flex h-20 items-center justify-between overflow-hidden"
    >
        <nav>
            <ul class="flex items-center gap-4 sm:gap-8">
                <li>
                    <a class="px-4 py-2" href={homeUrl}>
                        <Logo width={35} height={35} />
                        <p class="sr-only">Logo</p>
                    </a>
                </li>
                {
                    navLinks.map((link) => (
                        <li>
                            <HeaderLink href={link.href} lang={lang}>
                                {link.label}
                            </HeaderLink>
                        </li>
                    ))
                }
            </ul>
        </nav>

        <ul class="flex items-center gap-2 sm:gap-2">
            <li>
                <ThemeToggle transition:persist />
            </li>
            <li>
                <Link
                    size="icon"
                    variant="ghost"
                    href={"mailto:" + import.meta.env.EMAIL}
                    title=""
                >
                    <EmailIcon width={20} height={20} />
                </Link>
            </li>
        </ul>
    </div>
</header>
